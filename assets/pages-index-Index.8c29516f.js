import{o as t,c as e,w as i,a as r,n as s,b as o,r as d,d as a,i as h,e as l,s as n,h as c,f as u,g,j as m,F as f,k as p,l as b,t as w,m as _,p as y}from"./index-798fa2fe.js";import{_ as C,r as x}from"./uni-app.es.92259da7.js";import{g as k}from"./hero.93bdb9d4.js";const v=C({name:"UniGridItem",inject:["grid"],props:{index:{type:Number,default:0}},data:()=>({column:0,showBorder:!0,square:!0,highlight:!0,left:0,top:0,openNum:2,width:0,borderColor:"#e5e5e5"}),created(){this.column=this.grid.column,this.showBorder=this.grid.showBorder,this.square=this.grid.square,this.highlight=this.grid.highlight,this.top=0===this.hor?this.grid.hor:this.hor,this.left=0===this.ver?this.grid.ver:this.ver,this.borderColor=this.grid.borderColor,this.grid.children.push(this),this.width=this.grid.width},beforeDestroy(){this.grid.children.forEach(((t,e)=>{t===this&&this.grid.children.splice(e,1)}))},methods:{_onClick(){this.grid.change({detail:{index:this.index}})}}},[["render",function(l,n,c,u,g,m){const f=h;return g.width?(t(),e(f,{key:0,style:o("width:"+g.width+";"+(g.square?"height:"+g.width:"")),class:"uni-grid-item"},{default:i((()=>[r(f,{class:s([{"uni-grid-item--border":g.showBorder,"uni-grid-item--border-top":g.showBorder&&c.index<g.column,"uni-highlight":g.highlight},"uni-grid-item__box"]),style:o({"border-right-color":g.borderColor,"border-bottom-color":g.borderColor,"border-top-color":g.borderColor}),onClick:m._onClick},{default:i((()=>[d(l.$slots,"default",{},void 0,!0)])),_:3},8,["class","style","onClick"])])),_:3},8,["style"])):a("v-if",!0)}],["__scopeId","data-v-757baa44"]]);const B=C({name:"UniGrid",emits:["change"],props:{column:{type:Number,default:3},showBorder:{type:Boolean,default:!0},borderColor:{type:String,default:"#D2D2D2"},square:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0}},provide(){return{grid:this}},data:()=>({elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,width:0}),created(){this.children=[]},mounted(){this.$nextTick((()=>{this.init()}))},methods:{init(){setTimeout((()=>{this._getSize((t=>{this.children.forEach(((e,i)=>{e.width=t}))}))}),50)},change(t){this.$emit("change",t)},_getSize(t){l().in(this).select(`#${this.elId}`).boundingClientRect().exec((e=>{this.width=parseInt((e[0].width-1)/this.column)+"px",t(this.width)}))}}},[["render",function(a,l,n,c,u,g){const m=h;return t(),e(m,{class:"uni-grid-wrap"},{default:i((()=>[r(m,{id:u.elId,ref:"uni-grid",class:s(["uni-grid",{"uni-grid--border":n.showBorder}]),style:o({"border-left-color":n.borderColor})},{default:i((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["id","class","style"])])),_:3})}],["__scopeId","data-v-b4d2012f"]]);const I=C({data:()=>({heroList:[]}),onLoad(){this.getHeroList()},methods:{async getHeroList(){try{n({mask:!0,title:"获取英雄列表"});const t=await k();this.heroList=t.data.data}finally{c()}},jumpToHeroPowerPage(t){u({url:`/subPages/power/PowerQuery?cname=${t.cname}&avatar=${t.iconUrl}`})}}},[["render",function(s,o,d,a,l,n){const c=_,u=y,C=h,k=x(p("uni-grid-item"),v),I=x(p("uni-grid"),B);return t(),e(C,{class:"content"},{default:i((()=>[r(I,{column:4,highlight:!0},{default:i((()=>[(t(!0),g(f,null,m(l.heroList,((s,o)=>(t(),e(k,{index:o,key:o},{default:i((()=>[r(C,{class:"grid-item-box",style:{"background-color":"#fff"},onClick:t=>n.jumpToHeroPowerPage(s)},{default:i((()=>[r(c,{class:"avatar",src:s.iconUrl},null,8,["src"]),r(u,{class:"text"},{default:i((()=>[b(w(s.cname),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1032,["index"])))),128))])),_:1})])),_:1})}],["__scopeId","data-v-a8cd2226"]]);export{I as default};
